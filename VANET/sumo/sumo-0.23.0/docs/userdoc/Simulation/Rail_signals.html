<!DOCTYPE html>

<html lang="en">
<head>
  <title>Simulation/Rail_signals - SUMO - Simulation of Urban Mobility</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="../sumo.css">
  <link rel="license" href=
  "http://creativecommons.org/licenses/by-sa/3.0/">
</head>

<body id="bmission">
  <div id="container">
    <div id="logo" style="text-align:left">
      <img src="../logo.png" width="128" height="128"
      alt="SUMO-Simulation of Urban Mobility" style=
      "float:left; margin-left:10px; margin-right:20px;">
      <div id="logo_text1">SUMO</div>
      <div id="logo_text2">Simulation of Urban MObility</div>
    </div>

    <div id="subsMenu">
      <ul>
        <li class="sub"><a href=
        "http://sumo-sim.org/">Home</a></li>

        <li class="sub"><a href="../Downloads.html">Download</a></li>

        <li class="sub"><a href="../index.html">Documentation</a></li>

        <li class="sub"><a href=
        "http://sumo-sim.org/wiki/">Wiki</a></li>

        <li class="sub"><a href=
        "http://sumo-sim.org/trac/">Trac</a></li>

        <li class="sub"><a href=
        "http://sumo-sim.org/blog/">Blog</a></li>

        <li class="sub"><a href="../Contact.html">Contact</a></li>

        <li class="sub"><a href=
        "http://sourceforge.net/projects/sumo/">SF-Project</a></li>
      </ul>
    </div>

    <div id="nav">
      <div id="step1">
        <h3>User</h3>
        <ul>
        <!-- nav begins --> <li><a href="../SUMO_User_Documentation.html">Introduction</a></li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Sumo_at_a_Glance.html">The traffic simulation SUMO</a></li>
</ul></li>
  <li><a href="../SUMO_User_Documentation.html#Basic_Usage">Basic Usage</a></li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Basics/Notation.html">Notation in this Documentation</a></li>
  <li><a href="../Basics/Basic_Computer_Skills.html">Needed, basic Computer Skills</a></li>
  <li><a href="../Installing.html">Installing SUMO</a></li>
  <li><a href="../Basics/Using_the_Command_Line_Applications.html">Using SUMO Command Line Applications</a></li>
  <li><a href="../Tutorials.html">Tutorials</a></li>
</ul></li>
  <li><a href="../SUMO_User_Documentation.html#Network_Building">Network Building</a></li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Networks/SUMO_Road_Networks.html">SUMO Road Networks</a></li>
  <li><a href="../Networks/Abstract_Network_Generation.html">Abstract networks generation</a></li>
  <li><a href="../NETCONVERT.html">NETCONVERT</a></li>
<li style="list-style: none; display: inline"><ul>
   <li><a href="../Networks/Building_Networks_from_own_XML-descriptions.html">Defining own networks using XML</a></li>
   <li><a href="../Networks/Import.html">Importing non-SUMO networks</a></li>
<li style="list-style: none; display: inline"><ul>
    <li><a href="../Networks/Import/OpenStreetMap.html">... from OpenStreetMap</a></li>
    <li><a href="../Networks/Import/VISUM.html">... from VISUM</a></li>
    <li><a href="../Networks/Import/Vissim.html">... from Vissim</a></li>
    <li><a href="../Networks/Import/OpenDRIVE.html">... from OpenDRIVE</a></li>
    <li><a href="../Networks/Import/MATsim.html">... from MATsim</a></li>
    <li><a href="../Networks/Import/ArcView.html">... from ArcView (shapefiles)</a></li>
    <li><a href="../Networks/Import/DlrNavteq.html">... from Elmar's GDF</a></li>
    <li><a href="../Networks/Import/RoboCup.html">... from Robocup Simulation League</a></li>
</ul></li>
   <li><a href="../Networks/Import/SUMO_Road_Networks.html">Importing SUMO networks</a></li>
   <li><a href="../Simulation/Pedestrians.html#Building_a_network_for_pedestrian_simulation">Building networks for pedestrian simulation</a></li>
   <li><a href="../Networks/Further_Options.html">Further NETCONVERT options</a></li>
   <li><a href="../Networks/Further_Outputs.html">Additional output</a></li>
</ul></li>
</ul></li>
   <li><a href="../SUMO_User_Documentation.html#Demand_Modelling">Demand Modelling</a></li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Demand/Introduction_to_demand_modelling_in_SUMO.html">Introduction to SUMO Demand Modelling</a></li>
  <li><a href="../Definition_of_Vehicles,_Vehicle_Types,_and_Routes.html">Definition of Vehicles, Vehicle Types, and Routes</a></li>
  <li><a href="../Simulation/Public_Transport.html">Simulation of public transport</a></li>
  <li><a href="../Specification/Persons.html">Simulation of individual persons and trip chains</a></li>
  <li><a href="../Specification/Logistics.html">Simulation of logistics</a></li>
  <li><a href="../Demand/Shortest_or_Optimal_Path_Routing.html">Shortest or Optimal Path Routing</a></li>
  <li><a href="../Demand/Automatic_Routing_.html">Routing in the Simulation</a></li>
  <li><a href="../Demand/Dynamic_User_Assignment.html">Computing Dynamic User Assignment</a></li>
</ul></li>
  <li>Data sources for demand generation</li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Demand/Importing_O/D_Matrices.html">Importing O/D Matrices</a></li>
<li style="list-style: none; display: inline"><ul>
   <li><a href="../Demand/Further_Ways_to_import_VISUM_Demand_Definitions.html">Other VISUM Demand Importers</a></li>
   <li><a href="../Demand/Further_Ways_to_import_Vissim_Demand_Definitions.html">Other Vissim Demand Importers</a></li>
</ul></li>
  <li><a href="../Demand/Routes_from_Observation_Points.html">Routes from Observation Points</a></li>
  <li><a href="../Demand/Routing_by_Turn_Probabilities.html">Routing by Turn Probabilities</a></li>
  <li><a href="../Demand/Activity-based_Demand_Generation.html">Activity-based Demand Generation</a></li>
  <li><a href="../Tools/Trip.html#randomTrips.py">Random Trips</a></li>
</ul></li>
  <li><a href="../SUMO_User_Documentation.html#Simulation">Simulation</a></li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Simulation/Basic_Definition.html">Basic Definition</a></li>
  <li>Traffic Management and Other Structures</li>
<li style="list-style: none; display: inline"><ul>
   <li><a href="../Simulation/Traffic_Lights.html">Traffic Lights</a></li>
   <li><a href="../Simulation/Public_Transport.html">Public Transport</a></li>
   <li><a href="../Simulation/Variable_Speed_Signs.html">Variable Speed Signs</a></li>
   <li><a href="../Simulation/Rerouter.html">Rerouter / Alternative Route Signage</a></li>
   <li><a href="../Simulation/Vaporizer.html">Vaporizer</a></li>
   <li><a href="../Simulation/Calibrator.html">Dynamic calibration of flow and speed</a></li>
</ul></li>
  <li><a href="../Simulation/Output.html">Simulation output</a></li>
  <li><a href="../TraCI.html">TraCI (On-line Interaction)</a></li>
  <li><a href="../Simulation/Pedestrians.html">Pedestrian simulation</a></li>
  <li><a href="../Simulation/Shapes.html">Shapes Visualisation</a></li>
  <li><a href="../Models/Emissions.html">Emissions</a></li>
  <li><a href="../Simulation/VehicleSpeed.html">Vehicle speed</a></li>
  <li><a href="../Simulation/Randomness.html">Randomness</a></li>
  <li><a href="../Simulation/GenericParameters.html">Generic Parameters</a></li>
  <li>Common Problems</li>
<li style="list-style: none; display: inline"><ul>
   <li><a href="../Simulation/Why_Vehicles_are_teleporting.html">Why Vehicles are teleporting</a></li>
</ul></li>
</ul></li>
   <li><a href="../SUMO_User_Documentation.html#Theory">Theory</a></li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Theory/Traffic_Simulations.html">Traffic simulations in general</a></li>
</ul></li>
  <li><a href="../SUMO_User_Documentation.html#Appendices">Appendices</a></li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Other/Glossary.html">Glossary</a></li>
  <li><a href="../FAQ.html">FAQ</a></li>
  <li><a href="../Tools/Main.html">Additional Tools</a></li>
  <li><a href="../Other/File_Extensions.html">Known File Extensions</a></li>
  <li>Application Manuals</li>
<li style="list-style: none; display: inline"><ul>
   <li><a href="../SUMO.html">SUMO</a></li>
   <li><a href="../SUMO-GUI.html">SUMO-GUI</a></li>
   <li><a href="../NETCONVERT.html">NETCONVERT</a></li>
   <li><a href="../NETGENERATE.html">NETGENERATE</a></li>
   <li><a href="../OD2TRIPS.html">OD2TRIPS</a></li>
   <li><a href="../DUAROUTER.html">DUAROUTER</a></li>
   <li><a href="../JTRROUTER.html">JTRROUTER</a></li>
   <li><a href="../DFROUTER.html">DFROUTER</a></li>
   <li><a href="../MAROUTER.html">MAROUTER</a></li>
   <li><a href="../POLYCONVERT.html">POLYCONVERT</a></li>
   <li><a href="../ACTIVITYGEN.html">ACTIVITYGEN</a></li>
</ul></li>
  <li>Tool Manuals</li>
<li style="list-style: none; display: inline"><ul>
   <li><a href="../Tools/TraceExporter.html">Tools/TraceExporter</a></li>
   <li><a href="../Tools/Visualization.html">Tools/Visualization</a></li>
   <li><a href="../Tools/Emissions.html">Tools/Emissions</a></li>
</ul></li>
  <li><a href="../ChangeLog.html">ChangeLog</a></li>
</ul></li>
<!-- nav ends -->
        </ul>
      </div>

      <div id="step2">
        <h3>Further Resources</h3>

        <ul>
          <li><a href="../Data/Networks.html">Example
          Networks</a></li>

          <li><a href="../Data/Scenarios.html">Example
          Scenarios</a></li>

          <li><a href="../Data/Traffic_Data.html">Traffic
          Data</a></li>
        </ul>
      </div>

      <div id="step3">
        <h3>Developer</h3>

        <ul>
          <li><a href="../Developer/Main.html">Developer Docs</a></li>

          <li><a href="http://sumo-sim.org/daily/">Daily Tests
          Status</a></li>

          <li><a href="../../doxygen/">Doxygen Documentation</a></li>

          <li>Python Modules Documentation</li>

          <li style="list-style: none; display: inline">
            <ul>
              <li><a href="../../pydoc/traci.html">traci</a></li>

              <li><a href="../../pydoc/sumolib.html">sumolib</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <div id="content">
      <a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Simulation/Rail signals</span></h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
								<!-- tagline -->
				<div id="siteSub">generated on 2015-03-31 10:30:55.029548 from <a href="http://sumo.dlr.de/wiki/Simulation/Rail_signals">the wiki page for Simulation/Rail_signals</a> for SUMO 0.23.0</div>
				<!-- /tagline -->
								<!-- subtitle -->
				<div id="contentSub"></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				
				<!-- /jumpto -->
								<!-- bodycontent -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>Rail signals are <a href="../Networks/Building_Networks_from_own_XML-descriptions.html#Node_Descriptions" title="Networks/Building Networks from own XML-descriptions">node</a> types for controllig rail traffic. 
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Loading_a_rail_signal"><span class="tocnumber">1</span> <span class="toctext">Loading a rail signal</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Behaviour"><span class="tocnumber">3</span> <span class="toctext">Behaviour</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Output"><span class="tocnumber">4</span> <span class="toctext">Output</span></a></li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Loading_a_rail_signal">Loading a rail signal</span></h1>
<p>One simply has to define a node to have the <span class="inlxml">type</span> <i>rail_signal</i>, as in the following example:
</p>
<pre class="xml">
&lt;nodes&gt; &lt;!-- The opening tag --&gt;

   &lt;node id=&quot;1&quot; x=&quot;-500.0&quot; y=&quot;0.0&quot; type=&quot;rail_signal&quot;/&gt; 
   &lt;node id=&quot;2&quot; x=&quot;+500.0&quot; y=&quot;0.0&quot; type=&quot;rail_signal&quot;/&gt; 

&lt;/nodes&gt; &lt;!-- The closing tag --&gt;
</pre>
<h1> <span class="mw-headline" id="Usage">Usage</span></h1>
<p>If one uses a rail network (here, we mean a network consisting exclusively of <a href="../Networks/Building_Networks_from_own_XML-descriptions.html#Edge_Descriptions" title="Networks/Building Networks from own XML-descriptions">edges that allow only</a> trains) within its simulation, it is not required to use rail signals. Instead one could choose all junctions withing this network to be of the type <i>priority</i>, which results, however, in an unrealistic behaviour of the rail traffic. 
To achieve a more realistic behaviour, one can make use of rail signals. For that, one can split a longer rail section without any junctions in between into so called <i>blocks</i>, by choosing nodes within this section to have rail signals. Then, a <i>block</i> is the set of edges between two rail signals. The rail signal will then indicate green (we use green and red as for traffic lights) if there is no train in the block after the rail signal. A train will move from one block to the next one, and each time it wants to enter a block, the rail signal will state if this block is free and the train is allowed to enter, or if the block is occupied and the train has to wait until the block is empty.
</p><p>If one uses one rail signal within its simulation, it is required to use rail signals for every junction/railroad switch with more than two tracks for which there exists a path from an existing rail signal. Otherwise, a warning will be issued. This is required as a rail signal depends on its adjacent rail signals (or rather the blocks between the adjacent rail signals and itself). For rail sections without junctions/railroad switches, one can split them into as many blocks as one desires, but a block length of a few hundred metres can be reasonable size. Too large block lengths can result in long waiting tims for trains waiting to enter a block. Too short block lengths can result in trains following each other very closely.
</p>
<h1> <span class="mw-headline" id="Behaviour">Behaviour</span></h1>
<p>Rail signals are essentially traffic lights, however their state does not depend on TLS-programs. Instead, the state of a rail signal depends on the occupation of certain blocks. At every simulation step, the state of a rail signal will be updated based on the occupation. 
</p><p>The logic of the rail signals shall guarantee the following points:
</p>
<ul><li>Each block of a rail network is occupied by at most one train.
</li><li>If several trains approach the same junction/railroad switch from different lanes/edges and want to enter the same lane, at most one of these trains gets a green signal and all other trains get a red signal, even before one of these trains has entered the targeted lane. This will avoid that trains approach a rail signal with high velocity and receive suddently a red signal without having enough space to break before the rail signal.
</li></ul>
<p>A rail signal indicates green or red for each <a href="../Networks/Building_Networks_from_own_XML-descriptions.html#Connection_Descriptions" title="Networks/Building Networks from own XML-descriptions">connection</a> of the node individually. A connection <i>c</i> consists of one incoming lane <i>i</i> and one outgoing lane <i>o</i>. The signal for <i>c</i> depends on the occupation of:
</p>
<ul><li>The outgoing block. That is the block leading from the current rail signal over <i>o</i> to the next rail signal. 
</li><li>All blocks leading to <i>o</i>. A block leading to <i>o</i> is a block that is leading to the current rail signal for whose last lane there exists a connection to <i>o</i>. Clearly, the block to which <i>i</i> belongs is one of the blocks leading to <i>o</i>. We denote the set of the blocks leading to <i>o</i> by <i>O</i>.
</li></ul>
<p>If there is only one block leading to <i>o</i>, namely the one <i>i</i> belongs to, the signal of <i>c</i> is green if and only if the outgoing block of <i>c</i> is occupied by a train.
If there is more than one block leading to <i>o</i>, i.e. <i>|O|&gt;1</i>, we consider all connections to <i>o</i>. These connections correspond exactly to the blocks in <i>O</i>, and we denote the set of these connections by <i>C</i>. Moreover, we denote the set of connections in <i>C</i>, whose corresponding approaching blocks are occupied, by <i>D</i>. If the outgoing block of <i>c</i> is occupied by a train, then the signals for all connections in <i>C</i> are red. If the outgoing block of <i>c</i> is not occupied by a train and all blocks leading to <i>o</i> are not occupied, i.e. <i>|D|=0</i>, then the signals for all connections in <i>C</i> are green. If the outgoing block of <i>c</i> is not occupied by a train, and at least one block leading to <i>o</i> is occpuied by a train, i.e. <i>|D|&gt;0</i>, then exactly one connetion in <i>D</i> has a green signal and all other connections in <i>C</i> have a red signal.
</p><p><br />
<a href="../images/Outgoing_rail.png" class="image" title="thump"><img alt="thump" src="../images/Outgoing_rail.png" width="600" height="359" srcset="/w/images/thumb/5/5d/Outgoing_rail.png/900px-Outgoing_rail.png 1.5x, /w/images/thumb/5/5d/Outgoing_rail.png/1200px-Outgoing_rail.png 2x" /></a>
</p><p>Fig. 1: A rail signal for a railroad switch with one incoming lane from the left and three outgoing lanes to the right. The signal for the occupied outgoing block is red, all other signals green.
</p><p><br />
<a href="../images/Incoming_rail.png" class="image" title="thump"><img alt="thump" src="../images/Incoming_rail.png" width="600" height="361" srcset="/w/images/thumb/d/d1/Incoming_rail.png/900px-Incoming_rail.png 1.5x, /w/images/thumb/d/d1/Incoming_rail.png/1200px-Incoming_rail.png 2x" /></a>
</p><p>Fig. 2: A rail signal for a railroad switch with three incoming lanes from the left and one outgoing lane to the right. As all approaching blocks are occupied, only one signals is green.
</p>
<h1> <span class="mw-headline" id="Output">Output</span></h1>
<p>For logging the states of a rail signal, the same method as for <a href="../Simulation/Output/Traffic_Lights.html#TLS_States" title="Simulation/Output/Traffic Lights">logging TLS states of traffic lights</a> can be used. The attribute <span class="inlxml">source</span> has to be the ID of the junction the rail signal belongs to.
</p>
<!-- 
NewPP limit report
Preprocessor visited node count: 26/1000000
Preprocessor generated node count: 44/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key sumoSimWiki:pcache:idhash:584-0!*!0!!en!2!* and timestamp 20150330202652 -->
</div>				<!-- /bodycontent -->
								<!-- printfooter -->
				</div><hr/><div id="lastmod">This page was last modified on 23 March 2015, at 15:51.</div> </div>

    <div id="footer">
      <div>
        (c) 2011-2013, German Aerospace Center, Institute of
        Transportation Systems
      </div>

      <div>
        Layout based on <a href=
        "http://www.oswd.org/design/preview/id/3365">"Three
        Quarters"</a> by "SimplyGold"
      </div>
    </div>
  </div>
</body>
</html>
